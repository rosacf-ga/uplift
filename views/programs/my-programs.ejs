<%- include('../partials/header') %> 

<% if (programs.length) { %>
  <div class="program-container">
  <div class="row">
    <% programs.forEach(p => { %>
      <div class="card">
        <div class="card-title"><%= p.programName %></div>
        <div><%= p.city %>, <%= p.state %></div>
        <div><a href="/programs/<%= p._id %> ">Learn More</a></div>
        <% let total = 0 %> 
        <% p.reviews.forEach(r => { %> 
          <% total += r.rating %>
        <% }) %> 
        <% if (p.reviews.length) { %>
        <div>Average Rating<strong> <%= (total /p.reviews.length).toFixed(1) %></strong></div>
        <% } %>
      </div>
    <% }) %> 
    </div>
  </div>
    <% } else { %>
      <div class="no-programs">You haven't created any programs yet.</div>
<% } %> 

<%- include('../partials/footer') %>